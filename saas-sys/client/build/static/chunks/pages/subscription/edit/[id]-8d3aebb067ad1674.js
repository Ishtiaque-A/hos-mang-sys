(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{31812:function(e,t,i){"use strict";i.d(t,{Z:function(){return I}});var n=i(63366),r=i(87462),o=i(67294),a=i(98216),l=i(27909),s=i(94780),d=i(90948),u=i(71657),c=i(83321),x=i(98456),p=i(34867),h=i(1588);function m(e){return(0,p.Z)("MuiLoadingButton",e)}let g=(0,h.Z)("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]);var v=i(85893);let f=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],Z=e=>{let{loading:t,loadingPosition:i,classes:n}=e,o={root:["root",t&&"loading"],startIcon:[t&&`startIconLoading${(0,a.Z)(i)}`],endIcon:[t&&`endIconLoading${(0,a.Z)(i)}`],loadingIndicator:["loadingIndicator",t&&`loadingIndicator${(0,a.Z)(i)}`]},l=(0,s.Z)(o,m,n);return(0,r.Z)({},n,l)},j=e=>"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e&&"classes"!==e,y=(0,d.ZP)(c.Z,{shouldForwardProp:e=>j(e)||"classes"===e,name:"MuiLoadingButton",slot:"Root",overridesResolver:(e,t)=>[t.root,t.startIconLoadingStart&&{[`& .${g.startIconLoadingStart}`]:t.startIconLoadingStart},t.endIconLoadingEnd&&{[`& .${g.endIconLoadingEnd}`]:t.endIconLoadingEnd}]})(({ownerState:e,theme:t})=>(0,r.Z)({[`& .${g.startIconLoadingStart}, & .${g.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},"center"===e.loadingPosition&&{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${g.loading}`]:{color:"transparent"}},"start"===e.loadingPosition&&e.fullWidth&&{[`& .${g.startIconLoadingStart}, & .${g.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginRight:-8}},"end"===e.loadingPosition&&e.fullWidth&&{[`& .${g.startIconLoadingStart}, & .${g.endIconLoadingEnd}`]:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0,marginLeft:-8}})),b=(0,d.ZP)("div",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.loadingIndicator,t[`loadingIndicator${(0,a.Z)(i.loadingPosition)}`]]}})(({theme:e,ownerState:t})=>(0,r.Z)({position:"absolute",visibility:"visible",display:"flex"},"start"===t.loadingPosition&&("outlined"===t.variant||"contained"===t.variant)&&{left:"small"===t.size?10:14},"start"===t.loadingPosition&&"text"===t.variant&&{left:6},"center"===t.loadingPosition&&{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled},"end"===t.loadingPosition&&("outlined"===t.variant||"contained"===t.variant)&&{right:"small"===t.size?10:14},"end"===t.loadingPosition&&"text"===t.variant&&{right:6},"start"===t.loadingPosition&&t.fullWidth&&{position:"relative",left:-10},"end"===t.loadingPosition&&t.fullWidth&&{position:"relative",right:-10})),S=o.forwardRef(function(e,t){let i=(0,u.Z)({props:e,name:"MuiLoadingButton"}),{children:o,disabled:a=!1,id:s,loading:d=!1,loadingIndicator:c,loadingPosition:p="center",variant:h="text"}=i,m=(0,n.Z)(i,f),g=(0,l.Z)(s),j=null!=c?c:(0,v.jsx)(x.Z,{"aria-labelledby":g,color:"inherit",size:16}),S=(0,r.Z)({},i,{disabled:a,loading:d,loadingIndicator:j,loadingPosition:p,variant:h}),I=Z(S),_=d?(0,v.jsx)(b,{className:I.loadingIndicator,ownerState:S,children:j}):null;return(0,v.jsxs)(y,(0,r.Z)({disabled:a||d,id:g,ref:t},m,{variant:h,classes:I,ownerState:S,children:["end"===S.loadingPosition?o:_,"end"===S.loadingPosition?_:o]}))});var I=S},21214:function(e,t,i){"use strict";i.d(t,{Z:function(){return S}});var n=i(63366),r=i(87462),o=i(67294),a=i(63961),l=i(14142),s=i(34867),d=i(94780),u=i(31607),c=i(57874),x=i(46567),p=i(85893);let h=["className","component","disableGutters","fixed","maxWidth","classes"],m=(0,x.Z)(),g=(0,c.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`maxWidth${(0,l.Z)(String(i.maxWidth))}`],i.fixed&&t.fixed,i.disableGutters&&t.disableGutters]}}),v=e=>(0,u.Z)({props:e,name:"MuiContainer",defaultTheme:m}),f=(e,t)=>{let{classes:i,fixed:n,disableGutters:r,maxWidth:o}=e,a={root:["root",o&&`maxWidth${(0,l.Z)(String(o))}`,n&&"fixed",r&&"disableGutters"]};return(0,d.Z)(a,e=>(0,s.Z)(t,e),i)};var Z=i(98216),j=i(90948),y=i(71657);let b=function(e={}){let{createStyledComponent:t=g,useThemeProps:i=v,componentName:l="MuiContainer"}=e,s=t(({theme:e,ownerState:t})=>(0,r.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,i)=>{let n=e.breakpoints.values[i];return 0!==n&&(t[e.breakpoints.up(i)]={maxWidth:`${n}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>(0,r.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}})),d=o.forwardRef(function(e,t){let o=i(e),{className:d,component:u="div",disableGutters:c=!1,fixed:x=!1,maxWidth:m="lg"}=o,g=(0,n.Z)(o,h),v=(0,r.Z)({},o,{component:u,disableGutters:c,fixed:x,maxWidth:m}),Z=f(v,l);return(0,p.jsx)(s,(0,r.Z)({as:u,ownerState:v,className:(0,a.Z)(Z.root,d),ref:t},g))});return d}({createStyledComponent:(0,j.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`maxWidth${(0,Z.Z)(String(i.maxWidth))}`],i.fixed&&t.fixed,i.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,y.Z)({props:e,name:"MuiContainer"})});var S=b},33145:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subscription/edit/[id]",function(){return i(7050)}])},16278:function(e,t,i){"use strict";var n=i(85893);i(67294);var r=i(13029),o=i(46901);t.Z=e=>{let{open:t,onClose:i,message:a}=e;return(0,n.jsx)(r.Z,{open:t,autoHideDuration:6e3,onClose:i,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,n.jsx)(o.Z,{onClose:i,severity:"success",sx:{width:"100%"},children:a})})}},70515:function(e,t,i){"use strict";var n=i(85893);i(67294);var r=i(13029),o=i(46901);t.Z=e=>{let{open:t,onClose:i,message:a}=e;return(0,n.jsx)(r.Z,{open:t,autoHideDuration:6e3,onClose:i,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,n.jsx)(o.Z,{onClose:i,variant:"filled",severity:"error",sx:{width:"100%"},children:a})})}},7050:function(e,t,i){"use strict";i.r(t);var n=i(85893),r=i(67294),o=i(9008),a=i.n(o),l=i(36822),s=i(21214),d=i(16216),u=i(15861),c=i(66242),x=i(86886),p=i(50135),h=i(83978),m=i(87918),g=i(31812),v=i(16310),f=i(28482),Z=i(90948),j=i(11791),y=i(39620),b=i(30015),S=i(7328),I=i(2664),_=i(26903),E=i(35110),P=i(16278),N=i(70515),L=i(11163),R=i(9424),T=i(40294),D=i(35191),w=i(41664),C=i.n(w);(0,Z.ZP)(j.Z)(e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}});let F=e=>{var t,i,o;let Z=(0,L.useRouter)(),{id:j}=Z.query,[y,b]=(0,r.useState)([]),[S,I]=(0,r.useState)([]),[_,w]=(0,r.useState)([]),[F,z]=(0,r.useState)([]),[W,k]=(0,r.useState)(!0),[A,$]=(0,r.useState)(null),[K,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(0,E.Th)(j).then(e=>{var t;z(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.subscription_plan),k(!1)}).catch(()=>{ed("Unable to fetch data"),ep(!0)});let e=async()=>{try{var e,t;await (0,E.Th)(j);let i=await (0,E.Iu)();I(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.validity);let n=await (0,E.PY)();w(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.validity)}catch(e){console.log(e)}};e()},[]),(0,r.useEffect)(()=>{let e=async()=>{try{var e;let t=await (0,E.eK)();b(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.features)}catch(e){console.log(e)}};e()},[]);let O=v.Ry().shape({name:v.Z_().required(R.NK.REQUIRED.TITLE),user_limit:v.Z_().required(R.NK.REQUIRED.USER_LIMIT),price:v.Z_().required(R.NK.REQUIRED.PRICE),validity_id:v.Z_().required(R.NK.REQUIRED.DURATION),storage_limit_id:v.Z_().required(R.NK.REQUIRED.STORAGE),details:v.Z_().required(R.NK.REQUIRED.DETAILS),type:v.Z_().required(R.NK.REQUIRED.TYPE)}),M=[{id:1,name:"Regular"},{id:2,name:"Special"}],[G,B]=(0,r.useState)({id:1,name:"Regular"}),[q,V]=(0,r.useState)([]),[Q,Y]=(0,r.useState)([]),[H,X]=(0,r.useState)(null),[J,ee]=(0,r.useState)([]),[et,ei]=(0,r.useState)([]),[en,er]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=y.filter(e=>{var t;return null==F?void 0:null===(t=F.features)||void 0===t?void 0:t.some(t=>t.id===e.id)});ei(e)},[F,y]);let eo=S.filter(e=>{var t;return e.days===(null==F?void 0:null===(t=F.validity)||void 0===t?void 0:t.days)})[0],ea=_.filter(e=>{var t;return e.id===(null==F?void 0:null===(t=F.storage_limit)||void 0===t?void 0:t.id)})[0];console.log(F,"details>>>"),(0,r.useEffect)(()=>{V(M),Y(S),$(eo),X(ea),ee(_)},[F,_,S,G,ea]),console.log(ea,"defaultFeatureData2");let el=e=>{er(t=>t.filter(t=>t.label!==e.label))},[es,ed]=(0,r.useState)(""),[eu,ec]=(0,r.useState)(!1),[ex,ep]=(0,r.useState)(!1),eh=()=>{ed(""),ec(!1),ep(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:R.NK.EDIT_NEW_SUBSCRIPTION_PLAN})}),void 0!==eo&&void 0!==ea?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{component:"main",sx:{flexGrow:1},children:(0,n.jsx)(s.Z,{maxWidth:"xl",children:(0,n.jsx)(d.Z,{spacing:3,children:(0,n.jsx)(d.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:(0,n.jsx)(d.Z,{spacing:1,children:(0,n.jsx)(u.Z,{variant:"h5",sx:{padding:"8px",marginLeft:""},children:R.NK.EDIT_NEW_SUBSCRIPTION_PLAN})})})})})}),(0,n.jsx)(l.Z,{component:"main",sx:{flexGrow:1,py:1},children:(0,n.jsx)(s.Z,{maxWidth:"xl",children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.Z,{sx:{flexGrow:1,width:"90%",margin:"0 auto",marginTop:"2rem"},children:(0,n.jsx)(x.ZP,{container:!0,spacing:2,children:(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(f.J9,{initialValues:{id:j,name:(null==F?void 0:F.name)||"",user_limit:(null==F?void 0:F.user_limit)||"",validity_id:(null==F?void 0:null===(t=F.validity)||void 0===t?void 0:t.id)||"",price:(null==F?void 0:F.price)||0,status:"1",features:(null==F?void 0:null===(i=F.features)||void 0===i?void 0:i.map(e=>e.id))||[],storage_limit_id:(null==F?void 0:null===(o=F.storage_limit)||void 0===o?void 0:o.id)||"",details:(null==F?void 0:F.details)||"",type:(null==F?void 0:F.type)||0},onSubmit:e=>{U(!0),(0,E.lw)(e).then(e=>{if(200===e.code)ed(R.NK.UPDATE_SUCCESS_MESSAGE),ec(!0),U(!1),setTimeout(()=>{Z.push(T.GN.SUBSCRIPTION_PLAN_LIST)},3e3);else{var t;if(Object.keys(null==e?void 0:e.errors).length>0){for(let i in null===(t=e)||void 0===t?void 0:t.errors)if(e.errors[i]){let t=e.errors[i];for(let e=0;e<t.length;e++){let i=t[e];console.log("Error: "+i),ed(i),ep(!0)}}}else ed(e.message),ep(!0)}}).catch(e=>{ed(R.NK.ADD_ERROR_MESSAGE),ep(!0)})},validationSchema:O,children:t=>{let{values:i,errors:r,touched:o,setFieldValue:a}=t;return(0,n.jsx)(f.l0,{encType:"multipart/form-data",children:(0,n.jsxs)(x.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},sx:{marginTop:"2rem"},children:[(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.TITLE," ",(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{size:"small",variant:"outlined",name:"name",as:p.Z,sx:{mb:2,"& input":{color:"#4F4D4D"}},type:"text",fullWidth:!0}),o.name&&r.name&&(0,n.jsx)("div",{style:{color:"red",fontSize:"12px"},children:r.name})]})}),(0,n.jsxs)(x.ZP,{item:!0,xs:6,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.USER_LIMIT," ",(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"user_limit",as:p.Z,type:"number",fullWidth:!0})]}),o.user_limit&&r.user_limit&&(0,n.jsx)("div",{style:{color:"red",fontSize:"12px"},children:r.user_limit})]}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.VALIDITY_IN_DAYS,(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{name:"validity_id",as:h.Z,children:e=>{let{field:t,form:i}=e;return(0,n.jsx)(h.Z,{...t,value:eo,onChange:(e,t)=>{$(t),i.setFieldValue("validity_id",t?Number(t.id):null)},options:Q,getOptionLabel:e=>e.name,renderInput:e=>(0,n.jsx)(p.Z,{...e,size:"small",variant:"outlined",color:"error",error:i.errors.duration&&i.touched.duration,helperText:i.errors.duration&&i.touched.duration&&i.errors.duration,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.STORAGE_LIMIT,(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{name:"storage_limit_id",as:h.Z,children:e=>{let{field:t,form:i}=e;return(0,n.jsx)(h.Z,{...t,value:ea,onChange:(e,t)=>{X(t),i.setFieldValue("storage_limit_id",t?Number(t.id):null)},options:J,getOptionLabel:e=>e.name,renderInput:e=>(0,n.jsx)(p.Z,{...e,size:"small",variant:"outlined",error:i.errors.duration&&i.touched.duration,helperText:i.errors.duration&&i.touched.duration&&i.errors.duration,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.SELECT_MULTIPLE_FEATURE,(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),et?(0,n.jsx)(f.gN,{name:"features",children:e=>{let{field:t,form:i}=e;return(0,n.jsx)(h.Z,{multiple:!0,options:y,getOptionLabel:e=>e.name,value:et,onChange:(e,t)=>{ei(t),i.setFieldValue("features",t.map(e=>e.id)),i.setFieldValue("features",t.map(e=>e.id)),i.setFieldValue("featuresName",t?t.name:"")},renderInput:e=>(0,n.jsx)(p.Z,{...e,size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}}}),renderTags:(e,t)=>e.map((e,i)=>(0,n.jsx)(m.Z,{label:e.name,onDelete:()=>el(e),...t({index:i})},i))})}}):(0,n.jsx)(n.Fragment,{})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.PRICE,"(",e.currency,")",(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"price",as:p.Z,type:"number",fullWidth:!0}),o.price&&r.price&&(0,n.jsx)("div",{style:{color:"red",fontSize:"12px"},children:r.price})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.TYPE,(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{name:"type",as:h.Z,children:e=>{let{field:t,form:i}=e;return(0,n.jsx)(h.Z,{...t,value:G,onChange:(e,t)=>{B(t),i.setFieldValue("type",t?Number(t.id):null)},options:q,getOptionLabel:e=>e.name,renderInput:e=>(0,n.jsx)(p.Z,{...e,size:"small",variant:"outlined",error:i.errors.type&&i.touched.type,helperText:i.errors.type&&i.touched.type&&i.errors.type,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[R.NK.DETAILS,(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)(f.gN,{size:"small",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"details",as:p.Z,multiline:!0,rows:2,type:"text",fullWidth:!0}),o.details&&r.details&&(0,n.jsx)("div",{style:{color:"red",fontSize:"12px"},children:r.details})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsx)("div",{style:{width:"100%"},children:(0,n.jsx)(C(),{href:T.GN.SUBSCRIPTION_PLAN_LIST,children:(0,n.jsx)(g.Z,{variant:"contained",sx:{background:"white",padding:"3px",color:"#4287DA",mb:2,float:"","&:hover":{background:"#10741C",color:"white"}},children:R.Fo})})})}),(0,n.jsx)(x.ZP,{item:!0,xs:6,children:(0,n.jsxs)("div",{style:{width:"100%"},children:[(0,n.jsx)(g.Z,{type:"submit",color:"primary",loading:K,variant:"contained",sx:{background:"#089B1A",padding:"3px",color:"white",mb:2,float:"right","&:hover":{background:"#10741C"}},children:R.wb}),(0,n.jsx)(P.Z,{open:eu,onClose:eh,message:es}),(0,n.jsx)(N.Z,{open:ex,onClose:eh,message:es})]})})]})})}})})})})})})})]}):(0,n.jsx)(D.Z,{})]})};F.getLayout=e=>(0,n.jsx)(y.A,{children:e}),t.default=(0,I.$j)(e=>{var t,i,n;return{isAuthenticated:null===(t=(0,b.Z)(e))||void 0===t?void 0:t.isAuthenticated,userProfile:null===(i=(0,_.Z)(e))||void 0===i?void 0:i.userProfile,currency:null===(n=(0,b.Z)(e))||void 0===n?void 0:n.currency}},e=>({setUserProfileToReducerProp:t=>e((0,S.c9)(t))}))(F)}},function(e){e.O(0,[8199,9817,6901,7539,5968,1664,1159,9845,6886,8360,3029,8482,135,5551,3978,9620,9424,9774,2888,179],function(){return e(e.s=33145)}),_N_E=e.O()}]);