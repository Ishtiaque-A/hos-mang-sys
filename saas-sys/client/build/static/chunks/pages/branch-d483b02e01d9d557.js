(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9360],{25290:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/branch",function(){return i(85308)}])},85308:function(e,n,i){"use strict";i.r(n);var a=i(85893),l=i(39620),t=i(7328),r=i(26903),s=i(94005),o=i(30015),d=i(2664),c=i(9008),u=i.n(c),m=i(97650),h=i(6454),x=i(52091),p=i(50135),g=i(36822),j=i(21214),v=i(16216),Z=i(15861),b=i(83321),_=i(27110),f=i(25464),y=i(30431),z=i(86886),P=i(50657),S=i(37645),N=i(6514),C=i(31425),w=i(7906),q=i(295),D=i(98102),R=i(72882),E=i(53184),k=i(53816),F=i(11791),O=i(93946),A=i(50594),I=i(67294),W=i(90948),B=i(28482),V=i(16310),T=i(31812),L=i(32313),X=i(35110);i(459);var U=i(78465),G=i(70926);let H=e=>{let{field:n,form:i,...l}=e,{name:t,value:r}=n,{setFieldValue:s,setFieldTouched:o}=i,[d,c]=(0,I.useState)([]),[u,h]=(0,I.useState)(""),x=async()=>{(0,X.Z2)().then(e=>{var n;let i=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.map(e=>({...e,label:e.name,title:e.name,value:e.id}));c(i)}).catch(e=>console.log(e))};return(0,I.useEffect)(()=>(x(),()=>{}),[]),(0,a.jsx)("div",{children:(0,a.jsx)(m.ReactSearchAutocomplete,{...l,showIcon:!1,placeholder:"Search Organizations",items:d,inputSearchString:u||"",onSearch:e=>h(e),onBlur:()=>o(t,!0),searchInputProps:{className:"form-control",placeholder:"Search Organizations"},resultStringKeyName:"title",onSelect:e=>{s(t,e.id)},maxResults:5,fuseOptions:{keys:["title"]},styling:{borderRadius:"5px !important",zIndex:"20",width:"100%",boxShadow:"none",padding:"10px !important"},children:(e,n)=>(0,a.jsx)(p.Z,{...e,sx:{padding:"10px !important"},ref:e=>{n(e),searchInputRef.current=e}})})})},J=(0,W.ZP)(P.Z)(e=>{let{theme:n}=e;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}}),K={name:null,address:null,email:null,organization_id:null,contact_person_name:null,phone:null},M=e=>{var n,i,l,t,r,s,o,d;let[c,m]=(0,I.useState)(!1),[P,W]=(0,I.useState)(!1),[M,ee]=(0,I.useState)(!1),[en,ei]=(0,I.useState)(!1),[ea,el]=(0,I.useState)(null),[et,er]=(0,I.useState)([]),[es,eo]=(0,I.useState)(1),[ed,ec]=(0,I.useState)(5),[eu,em]=(0,I.useState)(0),[eh,ex]=(0,I.useState)(null),[ep,eg]=(0,I.useState)([]),[ej,ev]=(0,I.useState)(null),eZ=(0,G.a)(),eb=()=>ei(e=>!e),e_=async()=>{(0,X.Z2)().then(e=>{var n;let i=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.map(e=>({...e,label:e.name,title:e.name,value:e.id}));eg(i)}).catch(e=>console.log(e))};(0,I.useEffect)(()=>(e_(),()=>{}),[]),(0,I.useEffect)(()=>{let e="page=".concat(es,"&rowsPerPage=").concat(ed,"&organization_id=").concat((null==eh?void 0:eh.id)||"");return(0,X.yx)(e).then(e=>{var n,i;er(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.data),em(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.total)}).catch(e=>console.log(e)),()=>{}},[en,es,ed,null==eh?void 0:eh.id]);let ef=()=>{m(!1)},ey=()=>{W(!1),el(null),ev(null)},ez=e=>{el(e)},eP=V.Ry().shape({name:V.Z_().required("Name is required").min(3,"Name must be at least 3 characters"),organization_id:(null==eZ?void 0:null===(i=eZ.user)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.user_type)===0?V.Z_().required("Organization is required"):V.Z_().nullable(),contact_person_name:V.Z_().required("Contact Person Name is required"),phone:V.Z_().required("Phone is required").min(10,"Phone must be at least 10 characters").max(15,"Phone must be at least 15 characters"),email:V.Z_().email("Invalid email").required("Email is required"),address:V.Z_().nullable()});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(g.Z,{sx:{backgroundColor:"white",mx:"10px",my:"20px",borderRadius:"30px"},children:[(0,a.jsx)(u(),{children:(0,a.jsx)("title",{children:(0,a.jsx)("title",{children:"Branch"})})}),(0,a.jsx)(g.Z,{component:"main",sx:{flexGrow:1,py:8,marginTop:"1%",overflowX:"hidden"},children:(0,a.jsxs)(j.Z,{maxWidth:"xl",sx:{overflowX:"hidden"},children:[(0,a.jsx)(v.Z,{spacing:3,sx:{backgroundColor:"#fff",padding:"7px 16px",borderRadius:"10px"},children:(0,a.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:4,children:[(0,a.jsx)(v.Z,{spacing:1,children:(0,a.jsx)(Z.Z,{variant:"h5",children:"Branch Setup"})}),(0,a.jsx)(b.Z,{onClick:()=>m(!0),variant:"contained",sx:{borderRadius:"10px",backgroundColor:U.Vp.primary,"&:hover":{backgroundColor:U.Vp.primary},"&:active":{backgroundColor:U.Vp.primary}},children:"Add Branch"})]})}),(0,a.jsxs)(R.Z,{component:F.Z,sx:{marginTop:"20px",borderRadius:"10px",border:"1px solid #eee"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:(null==eZ?void 0:null===(t=eZ.user)||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.user_type)===0?"space-between":"flex-end",alignItems:"center",padding:"15px 0"},children:[(null==eZ?void 0:null===(s=eZ.user)||void 0===s?void 0:null===(r=s.user)||void 0===r?void 0:r.user_type)===0?(0,a.jsx)(L.ZP,{className:"basic-single",classNamePrefix:"select",isClearable:!0,isSearchable:!0,placeholder:"Select Organization",styles:{control:e=>({...e,width:"230px",marginLeft:"15px",borderRadius:"20px",paddingLeft:"2px"})},name:"organization",options:ep||[],onChange:e=>{e?(ex(e),eo(1),ec(5)):ex(null)},value:eh}):null,(0,a.jsx)(_.Z,{component:"div",count:eu,page:es,onPageChange:(e,n)=>{eo(n)},rowsPerPage:ed,onRowsPerPageChange:e=>{ec(parseInt(e.target.value,10)),eo(1)},rowsPerPageOptions:[5,10,25]})]}),(0,a.jsxs)(w.Z,{sx:{maxWidth:"100%",overflowX:"auto"},"aria-label":"simple table",children:[(0,a.jsx)(E.Z,{children:(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(D.Z,{align:"left",children:"SL\xa0"}),(0,a.jsx)(D.Z,{align:"center",children:"Name \xa0"}),(0,a.jsx)(D.Z,{align:"center",children:"Organization\xa0"}),(0,a.jsxs)(D.Z,{align:"center",children:[(0,a.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Contact Person"}),"\xa0"]}),(0,a.jsx)(D.Z,{align:"center",children:"Phone\xa0"}),(0,a.jsx)(D.Z,{align:"center",children:"Email\xa0"}),(0,a.jsx)(D.Z,{align:"center",children:"Address\xa0"}),(0,a.jsx)(D.Z,{align:"center",children:"Action\xa0"})]})}),(0,a.jsxs)(q.Z,{children:[!et||0===et.length&&(0,a.jsx)(k.Z,{children:(0,a.jsxs)(D.Z,{colSpan:7,align:"center",children:[" ","No Branch Found"]})}),et.length>0&&et.map((e,n)=>{var i;return(0,a.jsxs)(k.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,a.jsx)(D.Z,{component:"th",scope:"row",children:n+1}),(0,a.jsx)(D.Z,{align:"center",children:e.name}),(0,a.jsx)(D.Z,{align:"center",children:null==e?void 0:null===(i=e.organization)||void 0===i?void 0:i.name}),(0,a.jsx)(D.Z,{align:"center",children:null==e?void 0:e.contact_person_name}),(0,a.jsx)(D.Z,{align:"center",children:(0,a.jsx)("span",{style:{whiteSpace:"nowrap"},children:e.phone})}),(0,a.jsx)(D.Z,{align:"center",children:e.email}),(0,a.jsx)(D.Z,{align:"center",children:e.address}),(0,a.jsx)(D.Z,{align:"center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(O.Z,{variant:"contained","aria-label":"more","aria-controls":"subscription-menu","aria-haspopup":"true",onClick:n=>{ev(n.currentTarget),ez(e)},children:(0,a.jsx)(h.Nm0,{})}),(0,a.jsx)(f.Z,{id:"subscription-menu",anchorEl:ej,open:null!=ej&&ej,onClose:()=>ev(null),sx:{marginTop:"37px"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,a.jsxs)(y.Z,{onClick:()=>{W(!0),ev(null)},children:[(0,a.jsx)(x.fmQ,{size:20,style:{marginRight:"30px"},color:"#9DA4AE"}),"Update Info"]})})]})})]},null==e?void 0:e.id)})]})]})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)(J,{onClose:ef,"aria-labelledby":"customized-dialog-title",open:c,children:[(0,a.jsx)(S.Z,{sx:{marginLeft:"10px",fontSize:"18px",fontWeight:"500",marginBottom:"0px",m:0,p:2},id:"customized-dialog-title",children:"Add Branch"}),(0,a.jsx)(O.Z,{"aria-label":"close",onClick:ef,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,a.jsx)(A.Z,{})}),(0,a.jsx)(B.J9,{initialValues:{...K,organization_id:null==eZ?void 0:null===(d=eZ.user)||void 0===d?void 0:null===(o=d.user)||void 0===o?void 0:o.organization_id},onSubmit:e=>{var n,i,a;let l={...e};if(0===eZ.user.user.user_type){let n=ep.find(n=>n.id===e.organization_id);l={...l,organization_name:null==n?void 0:n.name}}else l={...l,organization_name:null==eZ?void 0:null===(a=eZ.user)||void 0===a?void 0:null===(i=a.user)||void 0===i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name,organization_id:eZ.user.user.organization_id};ee(!0),(0,X.zK)(l).then(e=>{200===e.code&&(eb(),ef(),ee(!1))}).catch(e=>{console.log(e),ee(!1)})},validationSchema:eP,children:e=>{let{values:n,errors:i,touched:l,setFieldValue:t,handleSubmit:r}=e;return(0,a.jsxs)(B.l0,{onSubmit:r,encType:"multipart/form-data",method:"post",children:[(0,a.jsxs)(N.Z,{sx:{width:"500px",overflowY:"auto",maxHeight:"70vh"},dividers:!0,children:[(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Branch Name",id:"name",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"name",placeholder:"Enter branch name",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"name",as:p.Z,type:"text",fullWidth:!0}),l.name&&i.name&&(0,a.jsx)(Q,{msg:i.name})]})}),0===eZ.user.user.user_type?(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Select Organization",id:"organization",isRequired:!0}),(0,a.jsx)(B.gN,{component:H,values:n,touched:l,errors:i,setFieldValue:t,name:"organization_id"}),(0,a.jsx)("br",{}),l.organization_id&&i.organization_id&&(0,a.jsx)(Q,{msg:i.organization_id})]})}):null,(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Contact Person Name",id:"contact_person",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"contact_person",placeholder:"Enter contact person name",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"contact_person_name",as:p.Z,fullWidth:!0}),l.contact_person_name&&i.contact_person_name&&(0,a.jsx)(Q,{msg:i.contact_person_name})]})}),(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Phone Number",id:"phone",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"phone",placeholder:"Enter phone number",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"phone",as:p.Z,type:"text",fullWidth:!0}),l.phone&&i.phone&&(0,a.jsx)(Q,{msg:i.phone})]})}),(0,a.jsxs)(z.ZP,{item:!0,xs:12,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Email",id:"email",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"email",placeholder:"Enter email",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"email",as:p.Z,type:"email",fullWidth:!0})]}),l.email&&i.email&&(0,a.jsx)(Q,{msg:i.email})]}),(0,a.jsxs)(z.ZP,{item:!0,xs:12,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Address",id:"address"}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"address",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"address",as:p.Z,multiline:!0,rows:3,type:"text",fullWidth:!0})]}),l.address&&i.address&&(0,a.jsx)(Q,{msg:i.address})]})]}),(0,a.jsx)(C.Z,{children:(0,a.jsx)(T.Z,{loading:M,sx:{backgroundColor:U.Vp.primary,"&:hover":{backgroundColor:U.Vp.primary},"&:active":{backgroundColor:U.Vp.primary}},variant:"contained",type:"submit",children:"Save"})})]})}})]}),(0,a.jsxs)(J,{onClose:ey,"aria-labelledby":"customized-dialog-titletype",open:P,children:[(0,a.jsx)(S.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Update Branch Information"}),(0,a.jsx)(O.Z,{"aria-label":"close",onClick:ey,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,a.jsx)(A.Z,{})}),ea&&(0,a.jsx)(Y,{onClose:ey,onRefetch:eb,data:ea})]})]})})]})})},Y=e=>{let{data:n,onRefetch:i,onClose:l}=e,[t,r]=(0,I.useState)(!1),s=V.Ry().shape({name:V.Z_().required("Name is required").min(3,"Name must be at least 3 characters"),contact_person_name:V.Z_().required("Contact Person Name is required"),phone:V.Z_().required("Phone is required").min(10,"Phone must be at least 10 characters").max(15,"Phone must be at least 15 characters"),email:V.Z_().email("Invalid email").required("Email is required"),address:V.Z_().nullable()}),o={name:(null==n?void 0:n.name)||null,address:(null==n?void 0:n.address)||null,email:(null==n?void 0:n.email)||null,contact_person_name:(null==n?void 0:n.contact_person_name)||null,phone:(null==n?void 0:n.phone)||null};return(0,a.jsx)(B.J9,{initialValues:o,onSubmit:e=>{r(!0),(0,X.v1)(e,n.id).then(e=>{200===e.code&&(i(),l(),r(!1))}).catch(e=>{r(!1)})},validationSchema:s,children:e=>{let{values:n,errors:i,touched:l,setFieldValue:r,handleSubmit:s}=e;return(0,a.jsxs)(B.l0,{onSubmit:s,encType:"multipart/form-data",method:"post",children:[(0,a.jsxs)(N.Z,{sx:{width:"550px",overflowY:"auto",maxHeight:"70vh"},dividers:!0,children:[(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Branch Name",id:"name",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"name",placeholder:"Enter branch name",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"name",as:p.Z,type:"text",fullWidth:!0}),l.name&&i.name&&(0,a.jsx)(Q,{msg:i.name})]})}),(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Contact Person Name",id:"contact_person",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"contact_person",placeholder:"Enter contact person name",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"contact_person_name",as:p.Z,fullWidth:!0}),l.contact_person_name&&i.contact_person_name&&(0,a.jsx)(Q,{msg:i.contact_person_name})]})}),(0,a.jsx)(z.ZP,{item:!0,xs:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Phone Number",id:"phone",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"phone",placeholder:"Enter phone number",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"phone",as:p.Z,type:"text",fullWidth:!0}),l.phone&&i.phone&&(0,a.jsx)(Q,{msg:i.phone})]})}),(0,a.jsxs)(z.ZP,{item:!0,xs:12,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Email",id:"email",isRequired:!0}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"email",placeholder:"Enter email",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"email",as:p.Z,type:"email",fullWidth:!0})]}),l.email&&i.email&&(0,a.jsx)(Q,{msg:i.email})]}),(0,a.jsxs)(z.ZP,{item:!0,xs:12,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)($,{title:"Address",id:"address"}),(0,a.jsx)(B.gN,{size:"small",variant:"outlined",id:"address",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"address",as:p.Z,multiline:!0,rows:3,type:"text",fullWidth:!0})]}),l.address&&i.address&&(0,a.jsx)(Q,{msg:i.address})]})]}),(0,a.jsx)(C.Z,{children:(0,a.jsx)(T.Z,{loading:t,sx:{backgroundColor:U.Vp.primary,"&:hover":{backgroundColor:U.Vp.primary},"&:active":{backgroundColor:U.Vp.primary}},variant:"contained",type:"submit",children:"Update"})})]})}})},Q=e=>{let{msg:n}=e;return(0,a.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"-10px",marginBottom:"10px"},children:n})},$=e=>{let{title:n,id:i,isRequired:l}=e;return(0,a.jsxs)("label",{htmlFor:i||"",style:{fontSize:"16px",fontFamily:"-apple-system"},children:[n," ",l?(0,a.jsx)("span",{style:{color:"red"},children:"*"}):null]})};M.getLayout=e=>(0,a.jsx)(l.A,{children:e}),n.default=(0,d.$j)(e=>{var n,i,a;return{isAuthenticated:null===(n=(0,o.Z)(e))||void 0===n?void 0:n.isAuthenticated,testData:null===(i=(0,o.Z)(e))||void 0===i?void 0:i.testData,userOrganization:null===(a=(0,r.Z)(e))||void 0===a?void 0:a.userOrganization}},e=>({setUserProfileToReducerProp:n=>e((0,t.c9)(n)),setIsAuthenticatedProp:n=>e((0,s.BF)(n)),userOrganizationSetToReducerProp:n=>e((0,t.GI)(n))}))(M)}},function(e){e.O(0,[3365,3219,8199,9817,6901,7539,5968,1664,1159,9845,6886,8360,8482,135,5864,7110,3203,3863,6175,9620,9774,2888,179],function(){return e(e.s=25290)}),_N_E=e.O()}]);