(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1277],{59006:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subscription-request/[id]",function(){return n(42605)}])},16278:function(e,i,n){"use strict";var s=n(85893);n(67294);var r=n(13029),l=n(46901);i.Z=e=>{let{open:i,onClose:n,message:t}=e;return(0,s.jsx)(r.Z,{open:i,autoHideDuration:6e3,onClose:n,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,s.jsx)(l.Z,{onClose:n,severity:"success",sx:{width:"100%"},children:t})})}},70515:function(e,i,n){"use strict";var s=n(85893);n(67294);var r=n(13029),l=n(46901);i.Z=e=>{let{open:i,onClose:n,message:t}=e;return(0,s.jsx)(r.Z,{open:i,autoHideDuration:6e3,onClose:n,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,s.jsx)(l.Z,{onClose:n,variant:"filled",severity:"error",sx:{width:"100%"},children:t})})}},42605:function(e,i,n){"use strict";n.r(i);var s=n(85893),r=n(67294),l=n(11163),t=n(41664),o=n.n(t),a=n(9008),d=n.n(a),c=n(37645),u=n(36822),x=n(21214),h=n(16216),p=n(15861),g=n(66242),m=n(86886),j=n(83321),_=n(83978),v=n(50135),Z=n(39620),b=n(35110),S=n(9424),E=n(40294),f=n(16278),P=n(70515),C=n(50657),D=n(31425),T=n(16310),k=n(28482),A=n(35191);let R=[{name:"B2B",value:"B2B",id:1},{name:"B2C",value:"B2C",id:2}],I=()=>{var e,i,n;let t=(0,l.useRouter)(),{id:a}=t.query,[Z,I]=(0,r.useState)([]),[N,B]=(0,r.useState)(null),[y,w]=(0,r.useState)([]),[O,L]=(0,r.useState)(""),[G,U]=(0,r.useState)(!1),[W,M]=(0,r.useState)(!1),[q,F]=(0,r.useState)(!1),[V,z]=(0,r.useState)(!0),[H,J]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(R[0]);(0,r.useEffect)(()=>{(0,b.m1)(a).then(e=>{var i;return(null==e?void 0:e.code)==200&&w(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.subscription_plans),(0,b.El)(a)}).then(e=>{var i,n,s;(null==e?void 0:e.code)==200&&(I(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.subscription_request),z(!1),B(null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(n=s.subscription_request)||void 0===n?void 0:n.subscription_plan))}).catch(()=>{L("Unable to fetch data"),M(!0)})},[H]);let X={subscription_plan_id:(null==N?void 0:N.id)||null,subscription_request_id:null==Z?void 0:Z.id,business_type:R[0].name,status:2};console.log(Z,"initialValues");let Y=T.Ry().shape({subscription_plan_id:T.Z_().required(S.kD.ERROR_SUBSCRIPTION_PLAN),business_type:T.Z_().required("This field is required")}),$=e=>{(0,b.OK)({id:[a],status:e}).then(e=>{if(200==e.code)L(S.gx.ADD_DELETE_MESSAGE),U(!0);else{var i;if(Object.keys(null==e?void 0:e.errors).length>0){for(let n in null===(i=e)||void 0===i?void 0:i.errors)if(e.errors[n]){let i=e.errors[n];for(let e=0;e<i.length;e++)L(i[e]),location.reload()}}else L(e.message),M(!0)}}).catch(e=>{L(S.Lb.ADD_ERROR_MESSAGE),M(!0)}),J(!H)},ee=()=>{L(""),U(!1),M(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d(),{children:(0,s.jsxs)("title",{children:[S.kD.SUBSCRIBE_DETAILS," "]})}),!1==V?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{component:"main",sx:{flexGrow:1},children:(0,s.jsx)(x.Z,{maxWidth:"xl",children:(0,s.jsx)(h.Z,{spacing:3,children:(0,s.jsx)(h.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:(0,s.jsx)(h.Z,{spacing:1,children:(0,s.jsx)(p.Z,{variant:"h5",sx:{padding:"8px",marginLeft:""},children:S.kD.SUBSCRIBE_DETAILS})})})})})}),(0,s.jsx)(u.Z,{component:"main",sx:{flexGrow:1,py:1},children:(0,s.jsx)(x.Z,{maxWidth:"xl",children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)(u.Z,{sx:{flexGrow:1,width:"80%",margin:"0 auto",marginTop:"2rem"},children:[(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginBottom:"20px"},children:[(0,s.jsxs)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:[S.kD.MAME," :"]}),(0,s.jsx)(m.ZP,{xs:8,children:Z.name})]}),(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginTop:"20px"},children:[(0,s.jsxs)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:[S.kD.EMAIL," :"]}),(0,s.jsx)(m.ZP,{xs:8,children:null==Z?void 0:Z.email})]}),(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginTop:"20px"},children:[(0,s.jsxs)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:[S.kD.PHONE," :"]}),(0,s.jsx)(m.ZP,{xs:8,children:null==Z?void 0:Z.mobile})]}),(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginTop:"20px"},children:[(0,s.jsxs)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:[S.kD.SUBSCRIPTION_PLAN," :"]}),(0,s.jsxs)(m.ZP,{xs:8,children:[null==Z?void 0:null===(e=Z.subscription_plan)||void 0===e?void 0:e.name," ",(0,s.jsx)(o(),{href:"".concat(E.GN.SUBSCRIPTION_PLAN_LIST,"/").concat(null==Z?void 0:null===(i=Z.subscription_plan)||void 0===i?void 0:i.id,"}"),children:(0,s.jsx)(j.Z,{style:{border:"1px solid #5BAD91",padding:"6px",color:"#5BAD91"},children:"Show more"})})]})]}),(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginTop:"20px"},children:[(0,s.jsxs)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:[S.kD.COUNTRY," :"]}),(0,s.jsx)(m.ZP,{xs:8,children:null==Z?void 0:Z.country})]}),(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginTop:"20px"},children:[(0,s.jsxs)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:[S.kD.MESSAGE," :"]}),(0,s.jsx)(m.ZP,{xs:8,children:null==Z?void 0:Z.message})]}),(0,s.jsxs)(m.ZP,{container:!0,spacing:2,sx:{color:"#545353",marginTop:"20px"},children:[(0,s.jsx)(m.ZP,{xs:4,sx:{fontWeight:"bold"},children:"Status :"}),(0,s.jsx)(m.ZP,{xs:8,children:0==(n=null==Z?void 0:Z.status)?S.gx.PENDING:1==n?S.gx.REVIEWING:2==n?S.gx.ACCEPTED:3==n?S.gx.REJECTED:void 0})]}),[0,1,3].includes(parseInt(null==Z?void 0:Z.status))&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{variant:"contained",onClick:()=>F(!0),sx:{background:"#089B1A",color:"white",border:"",marginTop:"1rem",float:"right",marginBottom:"1rem",padding:"3px","&:hover":{background:"#10741C"}},children:S.kD.ACCEPT}),(null==Z?void 0:Z.status)!=3&&(0,s.jsx)(j.Z,{variant:"contained",onClick:()=>$(3),sx:{background:"red",color:"white",border:"",marginTop:"1rem",float:"right",marginBottom:"1rem",marginLeft:"10px",marginRight:"10px",padding:"3px","&:hover":{background:"#10741C"}},children:S.kD.CANCEL})]}),(0,s.jsx)(m.ZP,{item:!0,xs:6,children:(0,s.jsx)("div",{style:{width:"100%"},children:(0,s.jsx)(o(),{href:E.GN.SUBSCRIPTION_REQUEST_LIST,children:(0,s.jsx)(j.Z,{variant:"contained",sx:{background:"white",padding:"3px",color:"#4287DA",mt:2,ml:-3,float:"","&:hover":{background:"#10741C",color:"white"}},children:"BACK"})})})}),(0,s.jsxs)(C.Z,{open:q,onClose:()=>F(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,children:[(0,s.jsxs)(c.Z,{children:["Select ",S.kD.SUBSCRIPTION_PLAN]}),(0,s.jsx)(u.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{m:1}},children:(0,s.jsx)(k.J9,{initialValues:X,onSubmit:e=>{z(!0),(0,b.n6)(e).then(e=>{if(z(!1),200==e.code)L(S.kD.ADD_SUCCESS_MESSAGE),U(!0),F(!1),setTimeout(()=>{t.push(E.GN.SUBSCRIPTION_REQUEST)},3e3);else{var i,n;if(Object.keys(null==e?void 0:e.errors).length>0){for(let n in null===(i=e)||void 0===i?void 0:i.errors)if(e.errors[n]){let i=e.errors[n];for(let e=0;e<i.length;e++)L(i[e]),M(!0)}}else L(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:S.kD.ADD_ERROR_MESSAGE),M(!0)}z(!1),J(!H)}).catch(e=>{z(!1),L(S.kD.ADD_ERROR_MESSAGE),M(!0),J(!H)})},validationSchema:Y,children:e=>{let{values:i,errors:n,touched:r,handleChange:l,handleBlur:t,handleSubmit:o,isSubmitting:a}=e;return(0,s.jsx)(k.l0,{children:(0,s.jsxs)(m.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},sx:{marginTop:"2rem"},children:[(0,s.jsxs)(m.ZP,{item:!0,xs:12,children:[(0,s.jsx)(k.gN,{name:"subscription_plan_id",as:_.Z,children:e=>{let{field:i,form:n}=e;return(0,s.jsx)(_.Z,{...i,value:N,onChange:(e,i)=>{B(i),n.setFieldValue("subscription_plan_id",i?Number(i.id):null)},options:y,getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(v.Z,{...e,size:"small",variant:"outlined",error:n.errors.subscription_plan_id&&n.touched.subscription_plan_id,helperText:n.errors.subscription_plan_id&&n.touched.subscription_plan_id&&n.errors.subscription_plan_id,sx:{width:"100%",marginBottom:"20px"}})})}}),(0,s.jsx)(k.gN,{name:"business_type",as:_.Z,children:e=>{let{field:i,form:n}=e;return(0,s.jsx)(_.Z,{...i,value:K,onChange:(e,i)=>{Q(i),n.setFieldValue("business_type",i?i.name:null)},options:R,getOptionLabel:e=>e.name,renderInput:e=>(0,s.jsx)(v.Z,{...e,size:"small",variant:"outlined",error:n.errors.business_type&&n.touched.business_type,helperText:n.errors.business_type&&n.touched.business_type&&n.errors.business_type,sx:{width:"100%",marginBottom:"20px"}})})}})]}),(0,s.jsx)(m.ZP,{item:!0,xs:12,children:(0,s.jsx)("div",{children:(0,s.jsx)(D.Z,{sx:{marginLeft:"150px"},children:(0,s.jsx)(j.Z,{type:"submit",children:"SUBMIT"})})})})]})})}})})]}),(0,s.jsx)(f.Z,{open:G,onClose:ee,message:O}),(0,s.jsx)(P.Z,{open:W,onClose:ee,message:O})]})})})})]}):(0,s.jsx)(A.Z,{})]})};I.getLayout=e=>(0,s.jsx)(Z.A,{children:e}),i.default=I}},function(e){e.O(0,[8199,9817,6901,7539,5968,1664,1159,9845,6886,8360,3029,8482,135,5551,3978,6724,9620,9424,9774,2888,179],function(){return e(e.s=59006)}),_N_E=e.O()}]);