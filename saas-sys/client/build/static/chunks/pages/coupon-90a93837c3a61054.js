(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6788],{13715:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/coupon",function(){return t(73642)}])},16278:function(e,n,t){"use strict";var r=t(85893);t(67294);var o=t(13029),i=t(46901);n.Z=e=>{let{open:n,onClose:t,message:l}=e;return(0,r.jsx)(o.Z,{open:n,autoHideDuration:6e3,onClose:t,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsx)(i.Z,{onClose:t,severity:"success",sx:{width:"100%"},children:l})})}},70515:function(e,n,t){"use strict";var r=t(85893);t(67294);var o=t(13029),i=t(46901);n.Z=e=>{let{open:n,onClose:t,message:l}=e;return(0,r.jsx)(o.Z,{open:n,autoHideDuration:6e3,onClose:t,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsx)(i.Z,{onClose:t,variant:"filled",severity:"error",sx:{width:"100%"},children:l})})}},15784:function(e,n,t){"use strict";t.d(n,{c:function(){return o}});var r=t(67294);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[n,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{t([])},[e]);let o=(0,r.useCallback)(()=>{t([...e])},[e]),i=(0,r.useCallback)(e=>{t(n=>[...n,e])},[]),l=(0,r.useCallback)(()=>{t([])},[]),c=(0,r.useCallback)(e=>{t(n=>n.filter(n=>n!==e))},[]);return{handleDeselectAll:l,handleDeselectOne:c,handleSelectAll:o,handleSelectOne:i,selected:n}}},73642:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ed}});var r=t(85893),o=t(67294),i=t(41664),l=t.n(i),c=t(9008),s=t.n(c),a=t(88005),d=t(36822),x=t(21214),h=t(16216),u=t(15861),p=t(83321),j=t(53219),g=t(15784),Z=t(39620),f=t(35110),m=t(9424),A=t(6514),E=t(31425),v=t(90948),C=t(50657),D=t(37645),b=t(58951),y=t(11163),S=t(45697),P=t.n(S),_=t(98102),O=t(89755),k=t(89396),T=t(57709),w=t(87109);let N=e=>{let{onSearch:n}=e;return(0,r.jsx)(h.Z,{spacing:3,children:(0,r.jsx)(h.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:(0,r.jsx)(T.Z,{onChange:e=>{let t=e.target.value;n(t)},style:{width:"300px",height:"40px",borderRadius:"30px"},placeholder:"Search",startAdornment:(0,r.jsx)(w.Z,{position:"start",children:(0,r.jsx)(j.Z,{color:"action",fontSize:"small",children:(0,r.jsx)(k.Z,{})})}),sx:{maxWidth:500,float:"right"}})})})};var I=t(79369),L=t(9869),z=t(41733),F=t(23508),R=t(53816),U=t(66242),G=t(86886),M=t(25464),W=t(30431),B=t(27110),V=t(7906),X=t(53184),H=t(69368),Q=t(295),Y=t(93946),q=t(734),J=t(95940),K=t(40294),ee=t(2664),en=t(30015);let et=e=>{let{count:n=0,items:t=[],onPageChange:i=()=>{},onRowsPerPageChange:c,page:s=0,rowsPerPage:a=0,selected:x=[],onSearch:j}=e,[g,Z]=(0,o.useState)(x),[f,A]=(0,o.useState)(!1),[E,C]=(0,o.useState)(0),D=(e,n)=>{e.target.checked?Z(e=>[...e,n]):Z(e=>e.filter(e=>e!==n)),A(e.target.checked)};(0,o.useEffect)(()=>{console.log(".......selectedRows......",g)},[g]);let b=e=>g.includes(e),[y,S]=o.useState(null),[P,k]=o.useState(null),[T,w]=o.useState(null),ee=()=>{S(null),C(null)},en=!!y,et=(0,v.ZP)(_.Z)(e=>{let{theme:n}=e;return{["&.".concat(O.Z.head)]:{backgroundColor:n.palette.common.white,color:n.palette.common.black},["&.".concat(O.Z.body)]:{fontSize:14,fontWeight:"bold"}}}),er=(0,v.ZP)(R.Z)(e=>{let{theme:n}=e;return{"&:last-child td, &:last-child th":{border:0}}});return(0,r.jsxs)(U.Z,{sx:{border:"1px solid #eee",borderRadius:"10px"},children:[(0,r.jsxs)(G.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(G.ZP,{item:!0,xs:2,md:3,children:(0,r.jsx)("div",{style:{width:"100%",padding:"10px"},children:(0,r.jsx)(N,{onSearch:j})})}),(0,r.jsx)(G.ZP,{item:!0,xs:1,md:1.5,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.Z,{sx:{color:"#000",background:"#F1EEEE",marginLeft:"10px",marginTop:"15px",padding:"5px 10px 5px 10px",borderRadius:"30px"},"aria-label":"more","aria-controls":"subscription-menu","aria-haspopup":"true",onClick:e=>{k(e.currentTarget)},children:["Status ",(0,r.jsx)(F.Z,{})]}),(0,r.jsxs)(M.Z,{id:"subscription-menu",anchorEl:P,open:!!P,onClose:()=>{k(null)},sx:{marginTop:"30px"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,r.jsx)(W.Z,{onClick:()=>{e.onFilter(1),k(null)},style:{textDecoration:"none",color:"#9DA4AE",fontSize:"14px"},children:"Active"}),(0,r.jsxs)(W.Z,{onClick:()=>{e.onFilter(0),k(null)},style:{textDecoration:"none",color:"#9DA4AE",fontSize:"14px"},children:["Inactive"," "]})]})]})}),f?(0,r.jsx)(G.ZP,{item:!0,xs:1,md:1.5,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p.Z,{sx:{color:"#000",background:"#F1EEEE",marginLeft:"10px",marginTop:"15px",padding:"5px 10px 5px 10px",borderRadius:"30px",fontSize:"14px"},"aria-label":"more","aria-controls":"subscription-menu","aria-haspopup":"true",onClick:e=>{w(e.currentTarget)},children:["Action ",(0,r.jsx)(F.Z,{})]}),(0,r.jsxs)(M.Z,{id:"subscription-menu",anchorEl:T,open:!!T,onClose:()=>{w(null)},sx:{marginTop:"30px"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,r.jsxs)(W.Z,{onClick:()=>e.onDelete(g,0),style:{textDecoration:"none",color:"#9DA4AE",fontSize:"14px"},children:["Inactive ",(0,r.jsx)(z.Z,{sx:{fontSize:"14px",marginLeft:"35px"}})]}),(0,r.jsx)(W.Z,{onClick:()=>e.onDelete(g,1),style:{textDecoration:"none",color:"#9DA4AE",fontSize:"14px"},children:"Active"})]})]})}):(0,r.jsx)(G.ZP,{item:!0,xs:1,md:1.5}),(0,r.jsx)(G.ZP,{item:!0,xs:8,md:6,children:(0,r.jsx)(B.Z,{component:"div",count:n,onPageChange:i,onRowsPerPageChange:c,page:s,rowsPerPage:a,rowsPerPageOptions:[5,10,25]})})]}),(0,r.jsx)(q.L,{children:(0,r.jsx)(d.Z,{sx:{minWidth:800},children:(0,r.jsxs)(V.Z,{children:[(0,r.jsx)(X.Z,{children:(0,r.jsxs)(er,{style:{backgroundColor:"#f2f2f2",borderBottom:"1px solid #F1F1F1"},children:[(0,r.jsx)(et,{padding:"checkbox",children:(0,r.jsx)(H.Z,{color:"primary",indeterminate:g.length>0&&g.length<t.length,checked:g.length===t.length,onChange:e=>{if(e.target.checked){let e=t.map(e=>e.id);Z(e)}else Z([]);A(e.target.checked)}})}),(0,r.jsx)(et,{children:"SL"}),(0,r.jsx)(et,{children:m.Iy.CUDE}),(0,r.jsx)(et,{children:m.Iy.AMOUNT}),(0,r.jsx)(et,{children:m.Iy.START_DATE}),(0,r.jsx)(et,{children:m.Iy.EXPIRE_DATE}),(0,r.jsx)(et,{children:m.Iy.USER_TYPE}),(0,r.jsx)(et,{children:"Status"}),(0,r.jsx)(et,{children:m.Iy.ACTION})]})}),(0,r.jsx)(Q.Z,{children:t.map((n,t)=>{var o;let i=b(n.id);return(0,r.jsxs)(R.Z,{hover:!0,children:[(0,r.jsx)(_.Z,{padding:"checkbox",children:(0,r.jsx)(H.Z,{color:"primary",sx:{color:"#9DA4AE"},checked:i,onChange:e=>D(e,n.id)})}),(0,r.jsx)(_.Z,{sx:{color:"#9DA4AE",textDecoration:"none"},children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:t+s*a+1})}),(0,r.jsx)(_.Z,{children:(0,r.jsx)(h.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,r.jsx)(u.Z,{variant:"caption",children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:(0,J.Q)(n.code)})})})}),(0,r.jsx)(_.Z,{children:(0,r.jsx)(u.Z,{variant:"caption",children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:"1"==n.discount_type?(0,r.jsxs)("label",{children:[n.amount," %"]}):(0,r.jsxs)("label",{children:[n.amount," ",null!==(o=null==e?void 0:e.currency)&&void 0!==o?o:$]})})})}),(0,r.jsx)(_.Z,{children:(0,r.jsx)(h.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,r.jsx)(u.Z,{variant:"caption",children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:n.start_date})})})}),(0,r.jsx)(_.Z,{children:(0,r.jsx)(h.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,r.jsx)(u.Z,{variant:"caption",children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:n.end_date})})})}),(0,r.jsx)(_.Z,{children:(0,r.jsx)(u.Z,{variant:"caption",sx:{color:"#9DA4AE"},children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:"0"==n.user_type?(0,r.jsx)("label",{children:"All user"}):(0,r.jsx)("label",{children:"Specific user"})})})}),(0,r.jsx)(_.Z,{children:(0,r.jsx)(u.Z,{variant:"caption",sx:{color:"#9DA4AE"},children:(0,r.jsx)(l(),{style:{textDecoration:"none",color:"#9DA4AE"},href:"".concat(K.GN.COUPON_PLAN_EDIT,"/").concat(n.id),children:"0"==n.status?(0,r.jsx)("label",{children:"Inactive"}):(0,r.jsx)("label",{children:"Active"})})})}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(Y.Z,{"aria-label":"more","aria-controls":"subscription-menu","aria-haspopup":"true",onClick:e=>{S(e.currentTarget),C(n)},children:(0,r.jsx)(I.Z,{})}),(0,r.jsx)(M.Z,{id:"subscription-menu",anchorEl:y,open:en,onClose:ee,sx:{marginTop:"30px"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsx)(W.Z,{onClick:ee,children:(0,r.jsxs)(l(),{href:"".concat(K.GN.COUPON_PLAN_LIST,"/").concat(null==E?void 0:E.id),style:{textDecoration:"none",color:"#9DA4AE",fontSize:"14px"},children:[m.Iy.DETAILS,(0,r.jsx)(L.Z,{sx:{fontSize:"14px",marginLeft:"35px"}})]})})})]})]},n.id)})})]})})})]})};et.propTypes={count:P().number,items:P().array,onDeselectAll:P().func,onDeselectOne:P().func,onPageChange:P().func,onRowsPerPageChange:P().func,onSelectAll:P().func,onSelectOne:P().func,page:P().number,rowsPerPage:P().number,selected:P().array};var er=(0,ee.$j)(e=>{var n;return{currency:null===(n=(0,en.Z)(e))||void 0===n?void 0:n.currency}})(et),eo=t(16278),ei=t(70515),el=t(35191),ec=t(78465);let es=(0,v.ZP)(C.Z)(e=>{let{theme:n}=e;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}}),ea=()=>{let[e,n]=(0,o.useState)([]),[t,i]=(0,o.useState)([]),[c,Z]=(0,o.useState)(""),[v,C]=(0,o.useState)(0),[S,P]=(0,o.useState)(5),_=(0,o.useMemo)(()=>{let e=v*S,n=e+S;return t.slice(e,n)},[t,v,S]),O=(0,o.useMemo)(()=>_.map(e=>e.id),[_]),k=(0,g.c)(O),[T,w]=o.useState(!1),[N,I]=(0,o.useState)(null),[L,z]=(0,o.useState)(!0);(0,y.useRouter)();let F=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;try{var t;let r=await (0,f.B3)(e),o=null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.coupons;n(o),i(o),z(!1)}catch(e){console.log(e)}};(0,o.useEffect)(()=>{F()},[]),(0,o.useEffect)(()=>{(()=>{let n=e.filter(e=>e.code.toLowerCase().includes(c.toLowerCase()));i(n)})()},[c]);let R=(0,o.useCallback)((e,n)=>{C(n)},[]),U=(0,o.useCallback)(e=>{P(e.target.value),C(0)},[]),G=()=>{w(!1),I(null)},M=(e,n)=>{(0,f.fO)({id:e,status:n}).then(e=>{if(200===e.code)B(m.bF.ADD_DELETE_MESSAGE),X(!0),setTimeout(()=>{F()},3e3);else{var n;if(Object.keys(null==e?void 0:e.errors).length>0){for(let t in null===(n=e)||void 0===n?void 0:n.errors)if(e.errors[t]){let n=e.errors[t];for(let e=0;e<n.length;e++){let t=n[e];console.log("Error: "+t),B(t),Q(!0)}}}else B(e.message),Q(!0)}}).catch(e=>{B(m.bF.ADD_ERROR_MESSAGE),Q(!0)}).finally(()=>{G()})},[W,B]=(0,o.useState)(""),[V,X]=(0,o.useState)(!1),[H,Q]=(0,o.useState)(!1),Y=()=>{B(""),X(!1),Q(!1)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.Z,{sx:{backgroundColor:"white",mx:"10px",my:"20px",borderRadius:"30px"},children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:(0,r.jsx)("title",{children:m.bF.TITLE})})}),!1===L?(0,r.jsx)(d.Z,{component:"main",sx:{flexGrow:1,py:8,marginTop:"1%"},children:(0,r.jsx)(x.Z,{maxWidth:"xl",children:(0,r.jsxs)(h.Z,{spacing:3,children:[(0,r.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,r.jsx)(h.Z,{spacing:1,children:(0,r.jsx)(u.Z,{variant:"h5",sx:{marginLeft:"10px"},children:m.bF.TITLE})}),(0,r.jsx)("div",{children:(0,r.jsx)(l(),{href:"coupon/add",style:{textDecoration:"none"},children:(0,r.jsx)(p.Z,{startIcon:(0,r.jsx)(j.Z,{fontSize:"12px",children:(0,r.jsx)(a.Z,{})}),variant:"contained",sx:{backgroundColor:ec.Vp.primary,"&:hover":{backgroundColor:ec.Vp.primary},"&:active":{backgroundColor:ec.Vp.primary}},children:m.bF.COUPON_Add_Button})})})]}),(0,r.jsx)(er,{count:e.length,items:_,onDeselectAll:k.handleDeselectAll,onDeselectOne:k.handleDeselectOne,onPageChange:R,onRowsPerPageChange:U,onSelectAll:k.handleSelectAll,onSelectOne:k.handleSelectOne,page:v,onSearch:e=>{Z(e),C(0)},rowsPerPage:S,selected:k.selected,onDelete:(e,n)=>{M(e,n)},onFilter:e=>{F(e)}}),(0,r.jsxs)(es,{onClose:G,"aria-labelledby":"customized-dialog-title",open:T,children:[(0,r.jsx)(D.Z,{id:"alert-dialog-slide-title",children:"Are you sure you want to delete the feature?"}),(0,r.jsx)(A.Z,{children:(0,r.jsx)(b.Z,{id:"alert-dialog-slide-description"})}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)(p.Z,{onClick:G,children:"Cancel"}),(0,r.jsx)(p.Z,{onClick:M,autoFocus:!0,children:"Agree"})]})]}),(0,r.jsx)(eo.Z,{open:V,onClose:Y,message:W}),(0,r.jsx)(ei.Z,{open:H,onClose:Y,message:W})]})})}):(0,r.jsx)(el.Z,{})]})})};ea.getLayout=e=>(0,r.jsx)(Z.A,{children:e});var ed=ea},95940:function(e,n,t){"use strict";t.d(n,{Q:function(){return r}});let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).join("")}}},function(e){e.O(0,[8199,9817,6901,7539,5968,1664,1159,9845,6886,8360,3029,5864,7110,3203,7346,9620,9424,9774,2888,179],function(){return e(e.s=13715)}),_N_E=e.O()}]);