(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8866],{17393:function(e,i,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/add",function(){return r(3066)}])},16278:function(e,i,r){"use strict";var l=r(85893);r(67294);var n=r(13029),s=r(46901);i.Z=e=>{let{open:i,onClose:r,message:o}=e;return(0,l.jsx)(n.Z,{open:i,autoHideDuration:6e3,onClose:r,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,l.jsx)(s.Z,{onClose:r,severity:"success",sx:{width:"100%"},children:o})})}},70515:function(e,i,r){"use strict";var l=r(85893);r(67294);var n=r(13029),s=r(46901);i.Z=e=>{let{open:i,onClose:r,message:o}=e;return(0,l.jsx)(n.Z,{open:i,autoHideDuration:6e3,onClose:r,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,l.jsx)(s.Z,{onClose:r,variant:"filled",severity:"error",sx:{width:"100%"},children:o})})}},3066:function(e,i,r){"use strict";r.r(i);var l=r(85893),n=r(67294),s=r(9008),o=r.n(s),t=r(41664),a=r.n(t),d=r(36822),c=r(21214),u=r(16216),x=r(15861),h=r(66242),p=r(86886),m=r(50135),v=r(83978),j=r(65400),g=r.n(j),y=r(28465),b=r(31812),f=r(16310),Z=r(28482),_=r(90948),S=r(11791),R=r(39620),E=r(30015),z=r(7328),D=r(2664),w=r(26903),P=r(35110),F=r(16278),C=r(70515),N=r(11163),T=r(9424),A=r(40294),O=r(35191),L=r(70926),U=r(78465);(0,_.ZP)(S.Z)(e=>{let{theme:i}=e;return{backgroundColor:"dark"===i.palette.mode?"#1A2027":"#fff",...i.typography.body2,padding:i.spacing(1),textAlign:"center",color:i.palette.text.secondary}});let k=e=>{var i;let r=(0,N.useRouter)(),[s,t]=(0,n.useState)({id:2,name:"System Admin"}),[j,_]=(0,n.useState)({id:0,name:"Select"}),[S,R]=(0,n.useState)({id:0,name:"Select"}),[E,z]=(0,n.useState)(null),[D,w]=(0,n.useState)(""),[k,I]=(0,n.useState)(null),[V,W]=(0,n.useState)([]),[G,M]=(0,n.useState)({id:0,name:"Select"}),[Q,H]=(0,n.useState)(!1),[q,$]=(0,n.useState)(!1),B=(0,L.a)();console.log(null==B?void 0:null===(i=B.user)||void 0===i?void 0:i.user,"auth");let X=f.Ry().shape({name:f.Z_().required(T.xR.REQUIRED.NAME),email:f.Z_().email("Invalid email format").required(T.xR.REQUIRED.EMAIL).matches(/^[^@]+@[^@]+\.[^@]+$/,"Invalid email format"),mobile:f.Z_().matches(/^01[0-9]{9}$/,"Invalid phone number").required(T.xR.REQUIRED.PHONE),password:f.Z_().required(T.xR.REQUIRED.PASSWORD)}),[J,K]=(0,n.useState)(""),[Y,ee]=(0,n.useState)(!1),[ei,er]=(0,n.useState)(!1),el=()=>{K(""),ee(!1),er(!1)};(0,n.useEffect)(()=>{(0,P._D)().then(e=>{var i;(null==e?void 0:e.code)==200&&R(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.organizations)})},[]),console.log(j,"organization");let en=()=>{var e,i,r,l;let n=(null==B?void 0:null===(i=B.user)||void 0===i?void 0:null===(e=i.user)||void 0===e?void 0:e.user_type)===0?null==j?void 0:j.id:null==B?void 0:null===(l=B.user)||void 0===l?void 0:null===(r=l.user)||void 0===r?void 0:r.organization_id;(0,P.z)(n).then(e=>{console.log(e,"res"),(null==e?void 0:e.code)==200&&W(null==e?void 0:e.data)}).catch(e=>{console.log(e)})};(0,n.useEffect)(()=>(en(),()=>{}),[null==j?void 0:j.id]),console.log(V);let es=(e,i)=>{if(e.fileList.length>0){let r=e.fileList[0].originFileObj,l=new FileReader;l.onload=()=>{I(l.result),w(l.result),i("photo",l.result)},l.onerror=()=>{console.error("Error reading the selected image.")},l.readAsDataURL(r)}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(d.Z,{sx:{backgroundColor:"white",mx:"10px",my:"20px",borderRadius:"30px"},children:[Q&&(0,l.jsx)(O.Z,{}),(0,l.jsx)(o(),{children:(0,l.jsx)("title",{children:T.xR.ADD_USER_TITLE})}),(0,l.jsx)(d.Z,{component:"main",sx:{flexGrow:1},children:(0,l.jsx)(c.Z,{maxWidth:"xl",children:(0,l.jsx)(u.Z,{spacing:3,children:(0,l.jsx)(u.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:(0,l.jsx)(u.Z,{spacing:1,children:(0,l.jsx)(x.Z,{variant:"h5",sx:{padding:"8px",pt:"40px"},children:T.xR.ADD_USER_TITLE})})})})})}),(0,l.jsx)(d.Z,{component:"main",sx:{flexGrow:1,py:1},children:(0,l.jsx)(c.Z,{maxWidth:"xl",children:(0,l.jsx)(h.Z,{sx:{border:"1px solid #eee",mb:"40px"},children:(0,l.jsx)(d.Z,{sx:{flexGrow:1,width:"90%",margin:"0 auto"},children:(0,l.jsx)(p.ZP,{container:!0,spacing:2,children:(0,l.jsx)(p.ZP,{item:!0,xs:12,children:(0,l.jsx)(Z.J9,{initialValues:{name:"",email:"",mobile:"",password:"",photo:D},onSubmit:e=>{if($(!0),E){let e=new FileReader;e.readAsDataURL(E),e.onloadend=()=>{w(e.result)}}H(!0),(0,P.vy)({...e,branch_name:null==G?void 0:G.name,branch_id:null==G?void 0:G.id}).then(e=>{if(H(!1),200===e.code)K(T.xR.ADD_SUCCESS_MESSAGE),ee(!0),$(!1),setTimeout(()=>{r.push(A.GN.USER_REQUEST)},3e3);else{var i;if($(!1),Object.keys(null==e?void 0:e.errors).length>0){for(let r in null===(i=e)||void 0===i?void 0:i.errors)if(e.errors[r]){let i=e.errors[r];for(let e=0;e<i.length;e++){let r=i[e];console.log("Error: "+r),K(r),er(!0)}}}else $(!1),K(e.message),er(!0)}}).catch(e=>{H(!1),K(T.xR.ADD_ERROR_MESSAGE),er(!0),$(!1)})},validationSchema:X,children:i=>{var r,n,o,d,c,u;let{values:x,errors:h,touched:f,setFieldValue:R}=i;return(0,l.jsx)(Z.l0,{encType:"multipart/form-data",children:(0,l.jsxs)(p.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},sx:{marginTop:"2rem"},children:[(0,l.jsxs)(p.ZP,{item:!0,xs:6,children:[(0,l.jsx)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:T.xR.PHOTO}),(0,l.jsx)("div",{children:(0,l.jsx)(y.Z,{beforeUpload:()=>!1,onChange:e=>es(e,R),accept:"image/*",listType:"picture-card",maxCount:1,children:(0,l.jsx)(g(),{style:{backgroundColor:"#70b42c",color:"white",border:"none",borderRadius:"5px"},children:"Pick File"})})})]}),(0,l.jsx)(p.ZP,{item:!0,xs:6}),(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[T.xR.NAME," ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"name",as:m.Z,type:"text",fullWidth:!0}),f.name&&h.name&&(0,l.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"-20px",marginLeft:"15px"},children:h.name})]})}),(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[T.xR.EMAIL," ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"email",as:m.Z,type:"email",fullWidth:!0}),f.email&&h.email&&(0,l.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"-20px",marginLeft:"15px"},children:h.email})]})}),(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[T.xR.PHONE," ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"mobile",as:m.Z,type:"text",fullWidth:!0}),f.mobile&&h.mobile&&(0,l.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"-20px",marginLeft:"15px"},children:h.mobile})]})}),(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:[T.xR.PASSWORD," ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{size:"small",variant:"outlined",sx:{mb:2,"& input":{color:"#4F4D4D"}},name:"password",as:m.Z,type:"password",fullWidth:!0}),f.password&&h.password&&(0,l.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"-20px",marginLeft:"15px"},children:h.password})]})}),(null==e?void 0:null===(r=e.userProfile)||void 0===r?void 0:r.user_type)==0&&(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:["User Type",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{name:"use_type",as:v.Z,children:e=>{let{field:i,form:r}=e;return(0,l.jsx)(v.Z,{...i,value:s,onChange:(e,i)=>{t(i),r.setFieldValue("user_type",i?Number(i.id):null)},options:[{id:2,name:"System Admin"},{id:3,name:"Organization Admin"}],getOptionLabel:e=>e.name,renderInput:e=>(0,l.jsx)(m.Z,{...e,size:"small",variant:"outlined",error:r.errors.type&&r.touched.user_type,helperText:r.errors.type&&r.touched.user_type&&r.errors.user_type,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]})}),(null==s?void 0:s.id)==3&&(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:["Organization",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{name:"organization_id",as:v.Z,children:e=>{let{field:i,form:r}=e;return(0,l.jsx)(v.Z,{...i,value:j,onChange:(e,i)=>{_(i),r.setFieldValue("organization_id",i?Number(i.id):null)},options:S,getOptionLabel:e=>e.name,renderInput:e=>(0,l.jsx)(m.Z,{...e,size:"small",variant:"outlined",error:r.errors.organization_id&&r.touched.organization_id,helperText:r.errors.organization_id&&r.touched.organization_id&&r.errors.organization_id,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]})}),(null==B?void 0:null===(n=B.user)||void 0===n?void 0:n.user)&&(null==B?void 0:null===(d=B.user)||void 0===d?void 0:null===(o=d.user)||void 0===o?void 0:o.user_type)!==0&&(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:["Select Branch",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)(Z.gN,{name:"branch_id",as:v.Z,children:e=>{let{field:i,form:r}=e;return(0,l.jsx)(v.Z,{...i,value:G,onChange:(e,i)=>{M(i),r.setFieldValue("branch_id",i?Number(i.id):null)},options:V,getOptionLabel:e=>e.name,renderInput:e=>(0,l.jsx)(m.Z,{...e,size:"small",variant:"outlined",error:r.errors.branch_id&&r.touched.branch_id,helperText:r.errors.branch_id&&r.touched.branch_id&&r.errors.branch_id,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]})}),(null==B?void 0:null===(u=B.user)||void 0===u?void 0:null===(c=u.user)||void 0===c?void 0:c.user_type)===0&&(null==s?void 0:s.id)==3&&(null==j?void 0:j.id)>0&&(0,l.jsxs)(p.ZP,{item:!0,xs:6,children:[(0,l.jsx)("div",{children:(0,l.jsxs)("label",{style:{fontSize:"16px",fontFamily:"-apple-system"},children:["Select Branch",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,l.jsx)(Z.gN,{name:"branch_id",as:v.Z,children:e=>{let{field:i,form:r}=e;return(0,l.jsx)(v.Z,{...i,value:G,onChange:(e,i)=>{M(i),r.setFieldValue("branch_id",i?Number(i.id):null)},options:V,getOptionLabel:e=>e.name,renderInput:e=>(0,l.jsx)(m.Z,{...e,size:"small",variant:"outlined",error:r.errors.branch_id&&r.touched.branch_id,helperText:r.errors.branch_id&&r.touched.branch_id&&r.errors.branch_id,sx:{mb:2,"& input":{color:"#4F4D4D"}}})})}})]}),(0,l.jsxs)(p.ZP,{container:!0,direction:"row",children:[(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsx)("div",{style:{width:"100%"},children:(0,l.jsx)(a(),{href:A.GN.USER_REQUEST,children:(0,l.jsx)(b.Z,{variant:"contained",sx:{border:"1px solid #eee",mb:2,backgroundColor:U.Vp.white,color:U.Vp.primary,"&:hover":{backgroundColor:U.Vp.white,color:U.Vp.primary}},children:T.Fo})})})}),(0,l.jsx)(p.ZP,{item:!0,xs:6,children:(0,l.jsxs)("div",{style:{width:"100%"},children:[(0,l.jsx)(b.Z,{type:"submit",color:"primary",loading:q,variant:"contained",sx:{mb:2,float:"right",backgroundColor:U.Vp.primary,"&:hover":{backgroundColor:U.Vp.primary},"&:active":{backgroundColor:U.Vp.primary}},children:T.zD}),(0,l.jsx)(F.Z,{open:Y,onClose:el,message:J}),(0,l.jsx)(C.Z,{open:ei,onClose:el,message:J})]})})]})]})})}})})})})})})})]})})};k.getLayout=e=>(0,l.jsx)(R.A,{children:e}),i.default=(0,D.$j)(e=>{var i,r;return{isAuthenticated:null===(i=(0,E.Z)(e))||void 0===i?void 0:i.isAuthenticated,userProfile:null===(r=(0,w.Z)(e))||void 0===r?void 0:r.userProfile}},e=>({setUserProfileToReducerProp:i=>e((0,z.c9)(i))}))(k)}},function(e){e.O(0,[8199,9817,6901,7539,5968,1664,1159,9845,6886,8360,3029,8482,135,5551,3978,4110,8939,9620,9424,9774,2888,179],function(){return e(e.s=17393)}),_N_E=e.O()}]);